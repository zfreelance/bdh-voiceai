# Enable Rewrite Engine
RewriteEngine On

# Redirect all requests to the app/ folder
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ app/index.php?$1 [L,QSA]

# Set the default index file
DirectoryIndex app/index.php

# Prevent direct access to the app/ folder
RewriteRule ^app(/|$) - [F,L]

# Security: Block access to .env and config files
<FilesMatch "^(\.env|config\.php|composer\.(json|lock))$">
    Order Allow,Deny
    Deny from all
</FilesMatch>
